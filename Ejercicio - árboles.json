{"cells":[{"cell_type":"code","execution_count":null,"id":"bc710211-6362-4224-803c-bb8bcc49f358","metadata":{"id":"bc710211-6362-4224-803c-bb8bcc49f358"},"outputs":[],"source":["# Importar librerías necesarias\n","import numpy as np\n","import pandas as pd\n","from sklearn.model_selection import train_test_split\n","from sklearn.tree import DecisionTreeClassifier\n","from sklearn.ensemble import RandomForestClassifier\n","from sklearn import tree\n","from sklearn.metrics import accuracy_score\n","import matplotlib.pyplot as plt\n","import seaborn as sns"]},{"cell_type":"markdown","id":"c2c37b66-5db7-4f9d-ac07-3a828cf7167a","metadata":{"id":"c2c37b66-5db7-4f9d-ac07-3a828cf7167a"},"source":["## Importo la data\n","\n","https://www.kaggle.com/datasets/uciml/adult-census-income/data"]},{"cell_type":"code","execution_count":null,"id":"4e0fea58-29d3-4b8c-8b58-1931688ec51d","metadata":{"id":"4e0fea58-29d3-4b8c-8b58-1931688ec51d"},"outputs":[],"source":["# Cargar el conjunto de datos\n","url = \"https://archive.ics.uci.edu/ml/machine-learning-databases/adult/adult.data\"\n","column_names = ['age', 'workclass', 'fnlwgt', 'education', 'education_num', 'marital_status',\n","                'occupation', 'relationship', 'race', 'sex', 'capital_gain', 'capital_loss',\n","                'hours_per_week', 'native_country', 'income']\n","df = pd.read_csv(\n","    url,\n","    header=None,\n","    names=column_names,\n","    na_values=' ?' # en el dataframe los valores nulos vienen como \" ?\"\n",")"]},{"cell_type":"markdown","id":"e715de8a-f44e-4e64-85d7-2629686355e6","metadata":{"id":"e715de8a-f44e-4e64-85d7-2629686355e6"},"source":["Descripción de los datos:\n","* age: Edad del individuo.\n","* workclass: Categoría de la clase de trabajo a la que pertenece el individuo.\n","* fnlwgt: Peso final, que representa el número de personas en la población que el individuo representa.\n","* education: Nivel educativo alcanzado por el individuo.\n","* education_num: Número asociado al nivel educativo del individuo.\n","* marital_status: Estado civil del individuo.\n","* occupation: Ocupación del individuo.\n","* relationship: Relación del individuo con el jefe de hogar.\n","* race: Raza del individuo.\n","* sex: Sexo del individuo.\n","* capital_gain: Ganancia de capital obtenida.\n","* capital_loss: Pérdida de capital incurrida.\n","* hours_per_week: Número de horas trabajadas por semana.\n","* native_country: País de origen del individuo.\n","* income: Ingreso del individuo (si es mayor o menor que 50K al año)."]},{"cell_type":"markdown","id":"f6fd1933-fbb3-41af-9c66-ec2357d67a0c","metadata":{"id":"f6fd1933-fbb3-41af-9c66-ec2357d67a0c"},"source":["## Limpieza de datos"]},{"cell_type":"markdown","id":"fe7050c0-3c66-4549-ab78-01305583b064","metadata":{"id":"fe7050c0-3c66-4549-ab78-01305583b064"},"source":["1. Verificar si hay valores nulos. En caso de haberlos, verificar si la cantidad de nulos de la columna es mayor al 40%. En caso de que los nulos superen el 40%, eliminar la columna, de caso contrario completarla como considere conveniente.\n","\n","   Se recomienda hacer gráficos para ver visualmente comportamiento de los datos"]},{"cell_type":"code","execution_count":null,"id":"ee7ddf66-67ef-40b8-b35d-401c788f5359","metadata":{"id":"ee7ddf66-67ef-40b8-b35d-401c788f5359"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"23cd3cd0-b190-4a82-b0bb-6dee0806da90","metadata":{"id":"23cd3cd0-b190-4a82-b0bb-6dee0806da90"},"source":["2. Realizar countplot de todas las variables categóricas que no haya graficado y tratar de identificar patrones, datos a agrupar o columnas a eliminar."]},{"cell_type":"code","execution_count":null,"id":"6e9703d2-9b39-4f59-a347-8fd8056f1b27","metadata":{"id":"6e9703d2-9b39-4f59-a347-8fd8056f1b27"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"id":"e661528d-6e23-4d70-91c2-1df19ea8c15d","metadata":{"id":"e661528d-6e23-4d70-91c2-1df19ea8c15d"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"id":"c5efdf5c-4e78-40c4-8a9e-7f1ce6a4674d","metadata":{"id":"c5efdf5c-4e78-40c4-8a9e-7f1ce6a4674d"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"99a7fa5b-9cb8-459b-b7c0-9251f82bdee9","metadata":{"id":"99a7fa5b-9cb8-459b-b7c0-9251f82bdee9"},"source":["3. Codificar variables categóricas binarias a 0 y 1. (Income y Sex)"]},{"cell_type":"code","execution_count":null,"id":"69a4f07d-8221-4f6d-8a98-58aa199a094f","metadata":{"id":"69a4f07d-8221-4f6d-8a98-58aa199a094f"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"55b2ebec-f90d-4b52-b4fe-5cf7d23aad87","metadata":{"id":"55b2ebec-f90d-4b52-b4fe-5cf7d23aad87"},"source":["4. Reducir columna educación en 5 valores\n","\n","* Primaria o Menos: 'Preschool', '1st-4th', '5th-6th'\n","* Secundaria Incompleta: '7th-8th', '9th', '10th', '11th', '12th'\n","* Secundaria Completa: 'HS-grad'\n","* Educación Técnica/Universitaria Incompleta: 'Some-college', 'Assoc-acdm', 'Assoc-voc'\n","* Grado Universitario o Superior: 'Bachelors', 'Masters', 'Prof-school', 'Doctorate'"]},{"cell_type":"code","execution_count":null,"id":"4a8303f1-621a-45af-8c40-b266d175f9c5","metadata":{"id":"4a8303f1-621a-45af-8c40-b266d175f9c5"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"707bc166-c61e-4bdc-8ce5-194d3cf3e57b","metadata":{"id":"707bc166-c61e-4bdc-8ce5-194d3cf3e57b"},"source":["5. Dado que la columna educacion y educacion_num proporcionan la misma información, eliminar educacion_num"]},{"cell_type":"code","execution_count":null,"id":"680788cb-03ad-435a-8b48-0bcd53efae16","metadata":{"id":"680788cb-03ad-435a-8b48-0bcd53efae16"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"b088b5c5-2e8a-4e7d-9fe3-0d50bfae8f99","metadata":{"id":"b088b5c5-2e8a-4e7d-9fe3-0d50bfae8f99"},"source":["6. Reducir columna relationship en 4 valores\n","\n","* Esposo/Esposa: Incluye 'Wife', 'Husband'.\n","* Hijo: Incluye 'Own-child'.\n","* Otro Pariente: Incluye 'Other-relative'.\n","* No en Familia: Incluye 'Not-in-family', 'Unmarried'."]},{"cell_type":"code","execution_count":null,"id":"426d0380-116f-4ed6-80c7-890718aeb4ea","metadata":{"id":"426d0380-116f-4ed6-80c7-890718aeb4ea"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"591e7bdc-df6b-46e1-8bd0-6147af87343d","metadata":{"id":"591e7bdc-df6b-46e1-8bd0-6147af87343d"},"source":["7. Reducir columna marital_status en 3 valores\n","\n","* Casado: Incluye 'Married-civ-spouse', 'Married-spouse-absent', 'Married-AF-spouse'.\n","* No Casado: Incluye 'Never-married'.\n","* Separado/Divorciado/Viudo: Incluye 'Divorced', 'Separated', 'Widowed'."]},{"cell_type":"code","execution_count":null,"id":"d9a04db2-3324-4516-b617-21d695d37c77","metadata":{"id":"d9a04db2-3324-4516-b617-21d695d37c77"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"a1f12404-de08-4b99-8a38-e4cb24e20dd9","metadata":{"id":"a1f12404-de08-4b99-8a38-e4cb24e20dd9"},"source":["8. Dado que casi todas las personas nacieron en EEUU, modificar la columna native-country para que los valores sean \"United-States\" o \"Other\""]},{"cell_type":"code","execution_count":null,"id":"352a4bf2-8324-4311-b0ad-256656b8b85a","metadata":{"id":"352a4bf2-8324-4311-b0ad-256656b8b85a"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"id":"ba1ff6bb-072c-4b4b-9639-ae88fcfe5604","metadata":{"id":"ba1ff6bb-072c-4b4b-9639-ae88fcfe5604"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"d5820a19-6ede-464f-95e5-6507b39be315","metadata":{"id":"d5820a19-6ede-464f-95e5-6507b39be315"},"source":["9. Reducir columna workclass en 3 valores\n","\n","* Privado: Incluye 'Private'.\n","* Autónomo: Incluye 'Self-emp-not-inc', 'Self-emp-inc'.\n","* Gobierno: Incluye 'Federal-gov', 'Local-gov', 'State-gov'.\n","* Sin Pago/No Trabajado: Incluye 'Without-pay', 'Never-worked'."]},{"cell_type":"code","execution_count":null,"id":"f0e755f9-2e8b-4ce3-95e4-e06188ab0444","metadata":{"id":"f0e755f9-2e8b-4ce3-95e4-e06188ab0444"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"ca33d6d9-57cb-44f2-8472-08328f16ed9f","metadata":{"id":"ca33d6d9-57cb-44f2-8472-08328f16ed9f"},"source":["10. Convertir variables categóricas a variables dummy"]},{"cell_type":"code","execution_count":null,"id":"faad7973-f889-4737-912a-d592269f304b","metadata":{"id":"faad7973-f889-4737-912a-d592269f304b"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"1e26a935-57d1-4525-8ee1-5b0de86fc73e","metadata":{"id":"1e26a935-57d1-4525-8ee1-5b0de86fc73e"},"source":["## Generar modelo"]},{"cell_type":"markdown","id":"897014ad-9fad-4d46-95e3-64531debc6df","metadata":{"id":"897014ad-9fad-4d46-95e3-64531debc6df"},"source":["11. Dividir datos en train y testing"]},{"cell_type":"code","execution_count":null,"id":"b3642f40-2cc4-428d-a3ac-2191fbbec36b","metadata":{"id":"b3642f40-2cc4-428d-a3ac-2191fbbec36b"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"id":"25a925fe-147a-470a-a2a1-6bf83466aa4c","metadata":{"id":"25a925fe-147a-470a-a2a1-6bf83466aa4c"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"174d2d15-a9b7-4a59-a584-99f0e44bc380","metadata":{"id":"174d2d15-a9b7-4a59-a584-99f0e44bc380"},"source":["12. Realizar modelo de arbol de decisión para predecir ingresos. Probar distintas profundidades hasta considerar que se tiene la profundidad óptima en función del accuracy del modelo"]},{"cell_type":"code","execution_count":null,"id":"b3d6fa69-88dd-45d8-b803-881c21563eec","metadata":{"id":"b3d6fa69-88dd-45d8-b803-881c21563eec"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"89f8a3d3-2e98-4b60-bf25-2af5901fb9ec","metadata":{"id":"89f8a3d3-2e98-4b60-bf25-2af5901fb9ec"},"source":["13. Generar árbol del modelo"]},{"cell_type":"code","execution_count":null,"id":"f0db45d3-35d9-4d7c-84e9-28edcb3e98e3","metadata":{"id":"f0db45d3-35d9-4d7c-84e9-28edcb3e98e3"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"7a594fd3-9444-43c2-8640-54054e799f20","metadata":{"id":"7a594fd3-9444-43c2-8640-54054e799f20"},"source":["14. Generar modelo con Random Forest"]},{"cell_type":"code","execution_count":null,"id":"e9b50cde-b84d-44a5-8a8e-ed54f6fc34b2","metadata":{"id":"e9b50cde-b84d-44a5-8a8e-ed54f6fc34b2"},"outputs":[],"source":[]},{"cell_type":"code","execution_count":null,"id":"c8eb0229-9928-4d9d-a45a-112182c657b6","metadata":{"id":"c8eb0229-9928-4d9d-a45a-112182c657b6"},"outputs":[],"source":[]},{"cell_type":"markdown","id":"5ba7b3e5-9751-4c44-90d9-dc9ca0f9f535","metadata":{"id":"5ba7b3e5-9751-4c44-90d9-dc9ca0f9f535"},"source":["15. Ver en Kaggle las soluciones propuestas con los accuracy de los usuarios"]}],"metadata":{"kernelspec":{"display_name":"Python 3 (ipykernel)","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.11.7"},"colab":{"provenance":[]}},"nbformat":4,"nbformat_minor":5}